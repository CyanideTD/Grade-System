<!DOCTYPE html>
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link href="css/style.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="js/jquery.js"></script> 
<script type="text/javascript" src="js/edit_table.js"></script>
<script type="text/javascript" src="js/table.js"></script>
</head>
<body>

<ul class="navigation">
  <li><a class="account" href="#">Account</a></li>
  <li><a href="#">Dashboard</a></li>
  <li><a class="active" href="#">Course</a></li>
  <li><a href="#">Groups</a></li>
  <li><a href="#">Calendar</a></li>
  <li><a href="#">Inbox</a></li>
  <li><a href="#">Commons</a></li>
  <li><a href="#">Help</a></li>
</ul>

<div class="right">
<div class="up1">
<div class="dropdown">
<button class="menu"><span>Menu</span></button>
  <div class="dropdown-menu" style="left:0;">
    <a href="#">Home</a>
    <a href="#">Announcements</a>
    <a href="#">Assignments</a>
    <a href="#">Discussions</a>
    <a href="#">Grades</a>
    <a href="#">People</a>
    <a href="#">Pages</a>
    <a href="#">Files</a>
    <a href="#">Syllabus</a>
    <a href="#">Outcomes</a>
    <a href="#">Quizzes</a>
    <a href="#">Modules</a>
    <a href="#">Conferences</a>
    <a href="#">Collaborations</a>
    <a href="#">Blackboard</a>
    <a href="#">Chat</a>
  </div>
</div>
<div  class="nav-top">
<nav>
<ul>
<li><span><a href="#">DOV DEV</a></span></li>
<span> > </span>
<li><span class="nav-grade"><a href="#">Grade</a></span></li>
</ul>
</nav>
</div>
</div>
<hr style="clear:left; margin-top:4em;">

<div class="up2">
<button class="aggreate" style="margin-left:10px;">Grade</button>
<button class="aggreate">Graph</button>
<button class="button" style="float:right;">Individual View</button>
<button class="button" style="float:right;">Showing All Section</button>
</div>

<hr style="clear:left; margin-top:4em;">

<div class="up3">

<div class="filter">
<form>
<br>
<input type="text" onkeyup="nameFilter()" id="name" name="filter_student" placeholder="Filter by student" style="margin-left:10px; padding:10px;">
<input type="text" name="filter_assignment" placeholder="Filter by assignment" style=" padding:10px;">
</form>
</div>

<button id="export" class="in-ex" style="float:right">export</button>
<button class="in-ex" style="float:right">import</button>
<br>
</div>

<div id="wrapper">
<table id="grades">
	<thead>
      <tr>
        <th><span>Name</span></th>
        <th><span>ID</span></th>
        <th edittype="TextBox"><span onclick="sortTable(2)">Assignment</span></th>
        <th edittype="TextBox">
        	<span onclick="sortTable(3)">Test</span>
        	<div class="drop-down">
			<div onclick="clickDropDown()" class="arrow-down dropbtn"></div>
			<div id="myDropdown" class="dropdown-content">
				<a href="#">Graph</a>
				<a href="#">Quick Gradeing</a>
				<a id="set-grade">Setting</a>
			</div>
			</div>
        </th>
        <th edittype="TextBox"><span onclick="sortTable(4)">Quiz</span></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="lalign">John</td>
        <td>104083</td>
        <td>66</td>
        <td>76</td>
        <td>98</td>
      </tr>
      <tr>
        <td class="lalign">Kelly</td>
        <td>123456</td>
        <td>87</td>
        <td>88</td>
        <td>98</td>
      </tr>
      <tr>
        <td class="lalign">Adam</td>
        <td>987654</td>
        <td>87</td>
        <td>98</td>
        <td>55</td>
      </tr>
      <tr>
        <td class="lalign">Arthas</td>
        <td>543234</td>
        <td>86</td>
        <td>76</td>
        <td>65</td>
      </tr>
      <tr>
        <td class="lalign">Uther</td>
        <td>123789</td>
        <td>65</td>
        <td>37</td>
        <td>87</td>
      </tr>
      <tr>
        <td class="lalign">Lich King</td>
        <td>523523</td>
        <td>98</td>
        <td>77</td>
        <td>88</td>
      </tr>
    </tbody>
  </table>
 </div> 
	
</div>

<div class="overlay" style="display:none;">
	<div class="set-wrapper">
		<div class="set-content">
		<a class="close">x</a>
		<h1>Grade Setting</h1>
		<form method="post" action="set-grade.java">
			<label for="max-grade">
        		max-grade
        		<input type="text" name="max-grade" id="max-grade" placeholder="input the max grade" pattern="+\d" required="required" />
        	</label>
        	<br>
        	<label for="max-grade">
        		lowest-grade
        		<input type="text" name="lowest-grade" id="lowest-grade" placeholder="input the lowest grade" pattern="+\d" required="required" />
        	</label>
        	<br>
			<button type="submit" style="margin-top:20px;">Save</button>
		</form>
		</div>
	</div>
</div>

<script type="text/javascript">
var table = document.getElementById("grades");
SetTableCanEdit(table);
function clickDropDown() {
    document.getElementById("myDropdown").classList.toggle("show");
}

// Close the dropdown if the user clicks outside of it
window.onclick = function(event) {
  if (!event.target.matches('.dropbtn')) {

    var dropdowns = document.getElementsByClassName("dropdown-content");
    var i;
    for (i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}
$(document).ready(function() {
	$("#set-grade").click(function(event){
		$(".overlay").fadeToggle("fast");
      });
});
$(document).ready(function() {
    $(".close").click(function(){
        $(".overlay").fadeToggle("fast");
    });
});
$(document).ready(function() {
    $(document).keyup(function(e) {
        if(e.keyCode == 27 && $(".overlay").css("display") != "none" ) { 
            $(".overlay").fadeToggle("fast");
        }
    });
});
$(document).ready(function() {
	  $("#export").click(function(e) {
	    e.preventDefault();

	    //getting data from our table
	    var data_type = 'data:application/vnd.ms-excel';
	    var table_div = document.getElementById('wrapper');
	    var table_html = table_div.outerHTML.replace(/ /g, '%20');

	    var a = document.createElement('a');
	    a.href = data_type + ', ' + table_html;
	    a.download = 'grade' + '.xls';
	    a.click();
	  });
	});
</script>

</body>
</html>